'use strict';function cov_rk1r9lt8j(){var path="/Users/bradleywadsworth/development/reform/pcq-frontend/app/core/steps/DateStep.js";var hash="3cedf00a10b197f7f823cf9fb91bcaf0a75c8ff5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/bradleywadsworth/development/reform/pcq-frontend/app/core/steps/DateStep.js",statementMap:{"0":{start:{line:3,column:23},end:{line:3,column:63}},"1":{start:{line:4,column:15},end:{line:4,column:32}},"2":{start:{line:5,column:15},end:{line:5,column:32}},"3":{start:{line:6,column:14},end:{line:6,column:50}},"4":{start:{line:11,column:8},end:{line:11,column:20}},"5":{start:{line:15,column:18},end:{line:15,column:43}},"6":{start:{line:16,column:8},end:{line:16,column:73}},"7":{start:{line:17,column:8},end:{line:17,column:19}},"8":{start:{line:21,column:8},end:{line:37,column:11}},"9":{start:{line:22,column:39},end:{line:22,column:99}},"10":{start:{line:24,column:28},end:{line:24,column:81}},"11":{start:{line:24,column:36},end:{line:24,column:80}},"12":{start:{line:25,column:12},end:{line:25,column:36}},"13":{start:{line:26,column:12},end:{line:26,column:40}},"14":{start:{line:27,column:12},end:{line:27,column:38}},"15":{start:{line:29,column:25},end:{line:29,column:104}},"16":{start:{line:31,column:12},end:{line:31,column:36}},"17":{start:{line:33,column:12},end:{line:36,column:13}},"18":{start:{line:34,column:16},end:{line:34,column:56}},"19":{start:{line:35,column:16},end:{line:35,column:87}},"20":{start:{line:39,column:8},end:{line:39,column:19}},"21":{start:{line:43,column:0},end:{line:43,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:4},end:{line:10,column:5}},loc:{start:{line:10,column:15},end:{line:12,column:5}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:24},end:{line:18,column:5}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:4},end:{line:20,column:5}},loc:{start:{line:20,column:47},end:{line:40,column:5}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:21,column:26},end:{line:21,column:27}},loc:{start:{line:21,column:40},end:{line:37,column:9}},line:21},"4":{name:"(anonymous_4)",decl:{start:{line:24,column:28},end:{line:24,column:29}},loc:{start:{line:24,column:36},end:{line:24,column:80}},line:24}},branchMap:{"0":{loc:{start:{line:20,column:30},end:{line:20,column:45}},type:"default-arg",locations:[{start:{line:20,column:41},end:{line:20,column:45}}],line:20},"1":{loc:{start:{line:24,column:36},end:{line:24,column:80}},type:"cond-expr",locations:[{start:{line:24,column:45},end:{line:24,column:71}},{start:{line:24,column:74},end:{line:24,column:80}}],line:24},"2":{loc:{start:{line:24,column:45},end:{line:24,column:71}},type:"binary-expr",locations:[{start:{line:24,column:45},end:{line:24,column:61}},{start:{line:24,column:65},end:{line:24,column:71}}],line:24},"3":{loc:{start:{line:33,column:12},end:{line:36,column:13}},type:"if",locations:[{start:{line:33,column:12},end:{line:36,column:13}},{start:{line:33,column:12},end:{line:36,column:13}}],line:33}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3cedf00a10b197f7f823cf9fb91bcaf0a75c8ff5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_rk1r9lt8j=function(){return actualCoverage;};}return actualCoverage;}cov_rk1r9lt8j();const ValidationStep=(cov_rk1r9lt8j().s[0]++,require('app/core/steps/ValidationStep'));const moment=(cov_rk1r9lt8j().s[1]++,require('moment'));const config=(cov_rk1r9lt8j().s[2]++,require('config'));const utils=(cov_rk1r9lt8j().s[3]++,require('app/components/step-utils'));class DateStep extends ValidationStep{dateName(){cov_rk1r9lt8j().f[0]++;cov_rk1r9lt8j().s[4]++;return null;}getContextData(req){cov_rk1r9lt8j().f[1]++;let ctx=(cov_rk1r9lt8j().s[5]++,super.getContextData(req));cov_rk1r9lt8j().s[6]++;ctx=this.parseDate(ctx,this.dateName(),req.session.language);cov_rk1r9lt8j().s[7]++;return ctx;}parseDate(ctx,dateNames,language=(cov_rk1r9lt8j().b[0][0]++,'en')){cov_rk1r9lt8j().f[2]++;cov_rk1r9lt8j().s[8]++;dateNames.forEach(dateName=>{cov_rk1r9lt8j().f[3]++;const[day,month,year]=(cov_rk1r9lt8j().s[9]++,[`${dateName}-day`,`${dateName}-month`,`${dateName}-year`]);cov_rk1r9lt8j().s[10]++;const setDate=d=>{cov_rk1r9lt8j().f[4]++;cov_rk1r9lt8j().s[11]++;return ctx[d]?(cov_rk1r9lt8j().b[1][0]++,(cov_rk1r9lt8j().b[2][0]++,parseInt(ctx[d]))||(cov_rk1r9lt8j().b[2][1]++,ctx[d])):(cov_rk1r9lt8j().b[1][1]++,ctx[d]);};cov_rk1r9lt8j().s[12]++;ctx[day]=setDate(day);cov_rk1r9lt8j().s[13]++;ctx[month]=setDate(month);cov_rk1r9lt8j().s[14]++;ctx[year]=setDate(year);const date=(cov_rk1r9lt8j().s[15]++,moment(`${ctx[day]}/${ctx[month]}/${ctx[year]}`,config.dateFormat).parseZone());cov_rk1r9lt8j().s[16]++;ctx[`${dateName}`]='';cov_rk1r9lt8j().s[17]++;if(date.isValid()){cov_rk1r9lt8j().b[3][0]++;cov_rk1r9lt8j().s[18]++;ctx[`${dateName}`]=date.toISOString();cov_rk1r9lt8j().s[19]++;ctx[`${dateName}-formattedDate`]=utils.formattedDate(date,language);}else{cov_rk1r9lt8j().b[3][1]++;}});cov_rk1r9lt8j().s[20]++;return ctx;}}cov_rk1r9lt8j().s[21]++;module.exports=DateStep;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWYWxpZGF0aW9uU3RlcCIsInJlcXVpcmUiLCJtb21lbnQiLCJjb25maWciLCJ1dGlscyIsIkRhdGVTdGVwIiwiZGF0ZU5hbWUiLCJnZXRDb250ZXh0RGF0YSIsInJlcSIsImN0eCIsInBhcnNlRGF0ZSIsInNlc3Npb24iLCJsYW5ndWFnZSIsImRhdGVOYW1lcyIsImZvckVhY2giLCJkYXkiLCJtb250aCIsInllYXIiLCJzZXREYXRlIiwiZCIsInBhcnNlSW50IiwiZGF0ZSIsImRhdGVGb3JtYXQiLCJwYXJzZVpvbmUiLCJpc1ZhbGlkIiwidG9JU09TdHJpbmciLCJmb3JtYXR0ZWREYXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIkRhdGVTdGVwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgVmFsaWRhdGlvblN0ZXAgPSByZXF1aXJlKCdhcHAvY29yZS9zdGVwcy9WYWxpZGF0aW9uU3RlcCcpO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5jb25zdCBjb25maWcgPSByZXF1aXJlKCdjb25maWcnKTtcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnYXBwL2NvbXBvbmVudHMvc3RlcC11dGlscycpO1xuXG5jbGFzcyBEYXRlU3RlcCBleHRlbmRzIFZhbGlkYXRpb25TdGVwIHtcblxuICAgIGRhdGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBnZXRDb250ZXh0RGF0YShyZXEpIHtcbiAgICAgICAgbGV0IGN0eCA9IHN1cGVyLmdldENvbnRleHREYXRhKHJlcSk7XG4gICAgICAgIGN0eCA9IHRoaXMucGFyc2VEYXRlKGN0eCwgdGhpcy5kYXRlTmFtZSgpLCByZXEuc2Vzc2lvbi5sYW5ndWFnZSk7XG4gICAgICAgIHJldHVybiBjdHg7XG4gICAgfVxuXG4gICAgcGFyc2VEYXRlKGN0eCwgZGF0ZU5hbWVzLCBsYW5ndWFnZSA9ICdlbicpIHtcbiAgICAgICAgZGF0ZU5hbWVzLmZvckVhY2goKGRhdGVOYW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbZGF5LCBtb250aCwgeWVhcl0gPSBbYCR7ZGF0ZU5hbWV9LWRheWAsIGAke2RhdGVOYW1lfS1tb250aGAsIGAke2RhdGVOYW1lfS15ZWFyYF07XG5cbiAgICAgICAgICAgIGNvbnN0IHNldERhdGUgPSAoZCkgPT4gKGN0eFtkXSA/IHBhcnNlSW50KGN0eFtkXSkgfHwgY3R4W2RdIDogY3R4W2RdKTtcbiAgICAgICAgICAgIGN0eFtkYXldID0gc2V0RGF0ZShkYXkpO1xuICAgICAgICAgICAgY3R4W21vbnRoXSA9IHNldERhdGUobW9udGgpO1xuICAgICAgICAgICAgY3R4W3llYXJdID0gc2V0RGF0ZSh5ZWFyKTtcblxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudChgJHtjdHhbZGF5XX0vJHtjdHhbbW9udGhdfS8ke2N0eFt5ZWFyXX1gLCBjb25maWcuZGF0ZUZvcm1hdCkucGFyc2Vab25lKCk7XG5cbiAgICAgICAgICAgIGN0eFtgJHtkYXRlTmFtZX1gXSA9ICcnO1xuXG4gICAgICAgICAgICBpZiAoZGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICBjdHhbYCR7ZGF0ZU5hbWV9YF0gPSBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgY3R4W2Ake2RhdGVOYW1lfS1mb3JtYXR0ZWREYXRlYF0gPSB1dGlscy5mb3JtYXR0ZWREYXRlKGRhdGUsIGxhbmd1YWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGN0eDtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0ZVN0ZXA7XG4iXSwibWFwcGluZ3MiOiJBQUFBLGEsKy9HQWVZO3lGQWJaLEtBQU1BLGVBQWMseUJBQUdDLE9BQU8sQ0FBQywrQkFBRCxDQUFWLENBQXBCLENBQ0EsS0FBTUMsT0FBTSx5QkFBR0QsT0FBTyxDQUFDLFFBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUUsT0FBTSx5QkFBR0YsT0FBTyxDQUFDLFFBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUcsTUFBSyx5QkFBR0gsT0FBTyxDQUFDLDJCQUFELENBQVYsQ0FBWCxDQUVBLEtBQU1JLFNBQU4sUUFBdUJMLGVBQWUsQ0FFbENNLFFBQVEsRUFBRywrQ0FDUCxNQUFPLEtBQVAsQ0FDSCxDQUVEQyxjQUFjLENBQUNDLEdBQUQsQ0FBTSx3QkFDaEIsR0FBSUMsSUFBRyx5QkFBRyxNQUFNRixjQUFOLENBQXFCQyxHQUFyQixDQUFILENBQVAsQ0FEZ0IsdUJBRWhCQyxHQUFHLENBQUcsS0FBS0MsU0FBTCxDQUFlRCxHQUFmLENBQW9CLEtBQUtILFFBQUwsRUFBcEIsQ0FBcUNFLEdBQUcsQ0FBQ0csT0FBSixDQUFZQyxRQUFqRCxDQUFOLENBRmdCLHVCQUdoQixNQUFPSCxJQUFQLENBQ0gsQ0FFREMsU0FBUyxDQUFDRCxHQUFELENBQU1JLFNBQU4sQ0FBaUJELFFBQVEsNEJBQUcsSUFBSCxDQUF6QixDQUFrQywrQ0FDdkNDLFNBQVMsQ0FBQ0MsT0FBVixDQUFtQlIsUUFBRCxFQUFjLHdCQUM1QixLQUFNLENBQUNTLEdBQUQsQ0FBTUMsS0FBTixDQUFhQyxJQUFiLDBCQUFxQixDQUFFLEdBQUVYLFFBQVMsTUFBYixDQUFxQixHQUFFQSxRQUFTLFFBQWhDLENBQTBDLEdBQUVBLFFBQVMsT0FBckQsQ0FBckIsQ0FBTixDQUQ0Qix3QkFHNUIsS0FBTVksUUFBTyxDQUFJQyxDQUFELEVBQVEsc0RBQUFWLElBQUcsQ0FBQ1UsQ0FBRCxDQUFILDRCQUFTLDJCQUFBQyxRQUFRLENBQUNYLEdBQUcsQ0FBQ1UsQ0FBRCxDQUFKLENBQVIsOEJBQW9CVixHQUFHLENBQUNVLENBQUQsQ0FBdkIsQ0FBVCw2QkFBc0NWLEdBQUcsQ0FBQ1UsQ0FBRCxDQUF6QyxFQUE0QyxDQUFwRSxDQUg0Qix3QkFJNUJWLEdBQUcsQ0FBQ00sR0FBRCxDQUFILENBQVdHLE9BQU8sQ0FBQ0gsR0FBRCxDQUFsQixDQUo0Qix3QkFLNUJOLEdBQUcsQ0FBQ08sS0FBRCxDQUFILENBQWFFLE9BQU8sQ0FBQ0YsS0FBRCxDQUFwQixDQUw0Qix3QkFNNUJQLEdBQUcsQ0FBQ1EsSUFBRCxDQUFILENBQVlDLE9BQU8sQ0FBQ0QsSUFBRCxDQUFuQixDQUVBLEtBQU1JLEtBQUksMEJBQUduQixNQUFNLENBQUUsR0FBRU8sR0FBRyxDQUFDTSxHQUFELENBQU0sSUFBR04sR0FBRyxDQUFDTyxLQUFELENBQVEsSUFBR1AsR0FBRyxDQUFDUSxJQUFELENBQU8sRUFBeEMsQ0FBMkNkLE1BQU0sQ0FBQ21CLFVBQWxELENBQU4sQ0FBb0VDLFNBQXBFLEVBQUgsQ0FBVixDQVI0Qix3QkFVNUJkLEdBQUcsQ0FBRSxHQUFFSCxRQUFTLEVBQWIsQ0FBSCxDQUFxQixFQUFyQixDQVY0Qix3QkFZNUIsR0FBSWUsSUFBSSxDQUFDRyxPQUFMLEVBQUosQ0FBb0IsbURBQ2hCZixHQUFHLENBQUUsR0FBRUgsUUFBUyxFQUFiLENBQUgsQ0FBcUJlLElBQUksQ0FBQ0ksV0FBTCxFQUFyQixDQURnQix3QkFFaEJoQixHQUFHLENBQUUsR0FBRUgsUUFBUyxnQkFBYixDQUFILENBQW1DRixLQUFLLENBQUNzQixhQUFOLENBQW9CTCxJQUFwQixDQUEwQlQsUUFBMUIsQ0FBbkMsQ0FDSCxDQUhELGdDQUlILENBaEJELEVBRHVDLHdCQW1CdkMsTUFBT0gsSUFBUCxDQUNILENBaENpQyxDLHdCQW1DdENrQixNQUFNLENBQUNDLE9BQVAsQ0FBaUJ2QixRQUFqQiJ9