'use strict';function cov_2g08vugkk1(){var path="/Users/priyankaverma/IdeaProjects/pcq-frontend/app/healthcheck.js";var hash="26abb4a484b77bb298f7adb0519754478d0531ef";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/priyankaverma/IdeaProjects/pcq-frontend/app/healthcheck.js",statementMap:{"0":{start:{line:3,column:20},end:{line:3,column:56}},"1":{start:{line:4,column:15},end:{line:4,column:55}},"2":{start:{line:5,column:11},end:{line:5,column:24}},"3":{start:{line:6,column:15},end:{line:6,column:32}},"4":{start:{line:7,column:19},end:{line:7,column:32}},"5":{start:{line:8,column:16},end:{line:8,column:42}},"6":{start:{line:9,column:20},end:{line:9,column:34}},"7":{start:{line:10,column:20},end:{line:10,column:44}},"8":{start:{line:12,column:15},end:{line:12,column:17}},"9":{start:{line:13,column:24},end:{line:13,column:26}},"10":{start:{line:15,column:0},end:{line:28,column:1}},"11":{start:{line:16,column:4},end:{line:27,column:7}},"12":{start:{line:18,column:27},end:{line:18,column:67}},"13":{start:{line:19,column:12},end:{line:22,column:13}},"14":{start:{line:20,column:16},end:{line:20,column:51}},"15":{start:{line:21,column:16},end:{line:21,column:33}},"16":{start:{line:23,column:12},end:{line:23,column:75}},"17":{start:{line:30,column:14},end:{line:42,column:1}},"18":{start:{line:31,column:4},end:{line:41,column:7}},"19":{start:{line:44,column:0},end:{line:48,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:32},end:{line:24,column:9}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:30,column:14},end:{line:30,column:15}},loc:{start:{line:30,column:21},end:{line:42,column:1}},line:30}},branchMap:{"0":{loc:{start:{line:15,column:0},end:{line:28,column:1}},type:"if",locations:[{start:{line:15,column:0},end:{line:28,column:1}},{start:{line:15,column:0},end:{line:28,column:1}}],line:15},"1":{loc:{start:{line:18,column:27},end:{line:18,column:67}},type:"cond-expr",locations:[{start:{line:18,column:33},end:{line:18,column:39}},{start:{line:18,column:42},end:{line:18,column:67}}],line:18},"2":{loc:{start:{line:18,column:42},end:{line:18,column:67}},type:"binary-expr",locations:[{start:{line:18,column:42},end:{line:18,column:57}},{start:{line:18,column:61},end:{line:18,column:67}}],line:18},"3":{loc:{start:{line:19,column:12},end:{line:22,column:13}},type:"if",locations:[{start:{line:19,column:12},end:{line:22,column:13}},{start:{line:19,column:12},end:{line:22,column:13}}],line:19},"4":{loc:{start:{line:23,column:19},end:{line:23,column:74}},type:"cond-expr",locations:[{start:{line:23,column:37},end:{line:23,column:53}},{start:{line:23,column:56},end:{line:23,column:74}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"26abb4a484b77bb298f7adb0519754478d0531ef"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2g08vugkk1=function(){return actualCoverage;};}return actualCoverage;}cov_2g08vugkk1();const healthcheck=(cov_2g08vugkk1().s[0]++,require('@hmcts/nodejs-healthcheck'));const logger=(cov_2g08vugkk1().s[1]++,require('app/components/logger')('Init'));const os=(cov_2g08vugkk1().s[2]++,require('os'));const config=(cov_2g08vugkk1().s[3]++,require('config'));const osHostname=(cov_2g08vugkk1().s[4]++,os.hostname());const version=(cov_2g08vugkk1().s[5]++,require('../version.json'));const gitCommitId=(cov_2g08vugkk1().s[6]++,version.commit);const gitRevision=(cov_2g08vugkk1().s[7]++,process.env.GIT_REVISION);const checks=(cov_2g08vugkk1().s[8]++,{});const readinessChecks=(cov_2g08vugkk1().s[9]++,{});cov_2g08vugkk1().s[10]++;if(config.services.pcqBackend.enabled==='true'){cov_2g08vugkk1().b[0][0]++;cov_2g08vugkk1().s[11]++;checks['pcq-backend']=healthcheck.web(`${config.services.pcqBackend.url}/health/readiness`,{callback:(err,res)=>{cov_2g08vugkk1().f[0]++;const status=(cov_2g08vugkk1().s[12]++,err?(cov_2g08vugkk1().b[1][0]++,'DOWN'):(cov_2g08vugkk1().b[1][1]++,(cov_2g08vugkk1().b[2][0]++,res.body.status)||(cov_2g08vugkk1().b[2][1]++,'DOWN')));cov_2g08vugkk1().s[13]++;if(status==='DOWN'){cov_2g08vugkk1().b[3][0]++;cov_2g08vugkk1().s[14]++;logger.warn('pcq-backend is DOWN');cov_2g08vugkk1().s[15]++;logger.warn(err);}else{cov_2g08vugkk1().b[3][1]++;}cov_2g08vugkk1().s[16]++;return status==='UP'?(cov_2g08vugkk1().b[4][0]++,healthcheck.up()):(cov_2g08vugkk1().b[4][1]++,healthcheck.down());},timeout:10000,deadline:20000});}else{cov_2g08vugkk1().b[0][1]++;}cov_2g08vugkk1().s[17]++;const setup=app=>{cov_2g08vugkk1().f[1]++;cov_2g08vugkk1().s[18]++;healthcheck.addTo(app,{checks:checks,readinessChecks:readinessChecks,buildInfo:{name:config.service.name,host:os.hostname(),uptime:process.uptime(),version:gitRevision,gitCommitId}});};cov_2g08vugkk1().s[19]++;module.exports={setup:setup,osHostname:osHostname,gitCommitId:gitCommitId};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoZWFsdGhjaGVjayIsInJlcXVpcmUiLCJsb2dnZXIiLCJvcyIsImNvbmZpZyIsIm9zSG9zdG5hbWUiLCJob3N0bmFtZSIsInZlcnNpb24iLCJnaXRDb21taXRJZCIsImNvbW1pdCIsImdpdFJldmlzaW9uIiwicHJvY2VzcyIsImVudiIsIkdJVF9SRVZJU0lPTiIsImNoZWNrcyIsInJlYWRpbmVzc0NoZWNrcyIsInNlcnZpY2VzIiwicGNxQmFja2VuZCIsImVuYWJsZWQiLCJ3ZWIiLCJ1cmwiLCJjYWxsYmFjayIsImVyciIsInJlcyIsInN0YXR1cyIsImJvZHkiLCJ3YXJuIiwidXAiLCJkb3duIiwidGltZW91dCIsImRlYWRsaW5lIiwic2V0dXAiLCJhcHAiLCJhZGRUbyIsImJ1aWxkSW5mbyIsIm5hbWUiLCJzZXJ2aWNlIiwiaG9zdCIsInVwdGltZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJoZWFsdGhjaGVjay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGhlYWx0aGNoZWNrID0gcmVxdWlyZSgnQGhtY3RzL25vZGVqcy1oZWFsdGhjaGVjaycpO1xuY29uc3QgbG9nZ2VyID0gcmVxdWlyZSgnYXBwL2NvbXBvbmVudHMvbG9nZ2VyJykoJ0luaXQnKTtcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKTtcbmNvbnN0IGNvbmZpZyA9IHJlcXVpcmUoJ2NvbmZpZycpO1xuY29uc3Qgb3NIb3N0bmFtZSA9IG9zLmhvc3RuYW1lKCk7XG5jb25zdCB2ZXJzaW9uID0gcmVxdWlyZSgnLi4vdmVyc2lvbi5qc29uJyk7XG5jb25zdCBnaXRDb21taXRJZCA9IHZlcnNpb24uY29tbWl0O1xuY29uc3QgZ2l0UmV2aXNpb24gPSBwcm9jZXNzLmVudi5HSVRfUkVWSVNJT047XG5cbmNvbnN0IGNoZWNrcyA9IHt9O1xuY29uc3QgcmVhZGluZXNzQ2hlY2tzID0ge307XG5cbmlmIChjb25maWcuc2VydmljZXMucGNxQmFja2VuZC5lbmFibGVkID09PSAndHJ1ZScpIHtcbiAgICBjaGVja3NbJ3BjcS1iYWNrZW5kJ10gPSBoZWFsdGhjaGVjay53ZWIoYCR7Y29uZmlnLnNlcnZpY2VzLnBjcUJhY2tlbmQudXJsfS9oZWFsdGgvcmVhZGluZXNzYCwge1xuICAgICAgICBjYWxsYmFjazogKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBlcnIgPyAnRE9XTicgOiByZXMuYm9keS5zdGF0dXMgfHwgJ0RPV04nO1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ0RPV04nKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ3BjcS1iYWNrZW5kIGlzIERPV04nKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXR1cyA9PT0gJ1VQJyA/IGhlYWx0aGNoZWNrLnVwKCkgOiBoZWFsdGhjaGVjay5kb3duKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICBkZWFkbGluZTogMjAwMDBcbiAgICB9KTtcbn1cblxuY29uc3Qgc2V0dXAgPSBhcHAgPT4ge1xuICAgIGhlYWx0aGNoZWNrLmFkZFRvKGFwcCwge1xuICAgICAgICBjaGVja3M6IGNoZWNrcyxcbiAgICAgICAgcmVhZGluZXNzQ2hlY2tzOiByZWFkaW5lc3NDaGVja3MsXG4gICAgICAgIGJ1aWxkSW5mbzoge1xuICAgICAgICAgICAgbmFtZTogY29uZmlnLnNlcnZpY2UubmFtZSxcbiAgICAgICAgICAgIGhvc3Q6IG9zLmhvc3RuYW1lKCksXG4gICAgICAgICAgICB1cHRpbWU6IHByb2Nlc3MudXB0aW1lKCksXG4gICAgICAgICAgICB2ZXJzaW9uOiBnaXRSZXZpc2lvbixcbiAgICAgICAgICAgIGdpdENvbW1pdElkXG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIHNldHVwOiBzZXR1cCxcbiAgICBvc0hvc3RuYW1lOiBvc0hvc3RuYW1lLFxuICAgIGdpdENvbW1pdElkOiBnaXRDb21taXRJZFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsYSwwb0dBZVk7MkZBYlosS0FBTUEsWUFBVywwQkFBR0MsT0FBTyxDQUFDLDJCQUFELENBQVYsQ0FBakIsQ0FDQSxLQUFNQyxPQUFNLDBCQUFHRCxPQUFPLENBQUMsdUJBQUQsQ0FBUCxDQUFpQyxNQUFqQyxDQUFILENBQVosQ0FDQSxLQUFNRSxHQUFFLDBCQUFHRixPQUFPLENBQUMsSUFBRCxDQUFWLENBQVIsQ0FDQSxLQUFNRyxPQUFNLDBCQUFHSCxPQUFPLENBQUMsUUFBRCxDQUFWLENBQVosQ0FDQSxLQUFNSSxXQUFVLDBCQUFHRixFQUFFLENBQUNHLFFBQUgsRUFBSCxDQUFoQixDQUNBLEtBQU1DLFFBQU8sMEJBQUdOLE9BQU8sQ0FBQyxpQkFBRCxDQUFWLENBQWIsQ0FDQSxLQUFNTyxZQUFXLDBCQUFHRCxPQUFPLENBQUNFLE1BQVgsQ0FBakIsQ0FDQSxLQUFNQyxZQUFXLDBCQUFHQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsWUFBZixDQUFqQixDQUVBLEtBQU1DLE9BQU0sMEJBQUcsRUFBSCxDQUFaLENBQ0EsS0FBTUMsZ0JBQWUsMEJBQUcsRUFBSCxDQUFyQixDLHlCQUVBLEdBQUlYLE1BQU0sQ0FBQ1ksUUFBUCxDQUFnQkMsVUFBaEIsQ0FBMkJDLE9BQTNCLEdBQXVDLE1BQTNDLENBQW1ELHFEQUMvQ0osTUFBTSxDQUFDLGFBQUQsQ0FBTixDQUF3QmQsV0FBVyxDQUFDbUIsR0FBWixDQUFpQixHQUFFZixNQUFNLENBQUNZLFFBQVAsQ0FBZ0JDLFVBQWhCLENBQTJCRyxHQUFJLG1CQUFsRCxDQUFzRSxDQUMxRkMsUUFBUSxDQUFFLENBQUNDLEdBQUQsQ0FBTUMsR0FBTixHQUFjLHlCQUNwQixLQUFNQyxPQUFNLDJCQUFHRixHQUFHLDZCQUFHLE1BQUgsOEJBQVksNEJBQUFDLEdBQUcsQ0FBQ0UsSUFBSixDQUFTRCxNQUFULCtCQUFtQixNQUFuQixDQUFaLENBQU4sQ0FBWixDQURvQix5QkFFcEIsR0FBSUEsTUFBTSxHQUFLLE1BQWYsQ0FBdUIscURBQ25CdEIsTUFBTSxDQUFDd0IsSUFBUCxDQUFZLHFCQUFaLEVBRG1CLHlCQUVuQnhCLE1BQU0sQ0FBQ3dCLElBQVAsQ0FBWUosR0FBWixFQUNILENBSEQsaUNBRm9CLHlCQU1wQixNQUFPRSxPQUFNLEdBQUssSUFBWCw2QkFBa0J4QixXQUFXLENBQUMyQixFQUFaLEVBQWxCLDhCQUFxQzNCLFdBQVcsQ0FBQzRCLElBQVosRUFBckMsQ0FBUCxDQUNILENBUnlGLENBUzFGQyxPQUFPLENBQUUsS0FUaUYsQ0FVMUZDLFFBQVEsQ0FBRSxLQVZnRixDQUF0RSxDQUF4QixDQVlILENBYkQsaUMseUJBZUEsS0FBTUMsTUFBSyxDQUFHQyxHQUFHLEVBQUksa0RBQ2pCaEMsV0FBVyxDQUFDaUMsS0FBWixDQUFrQkQsR0FBbEIsQ0FBdUIsQ0FDbkJsQixNQUFNLENBQUVBLE1BRFcsQ0FFbkJDLGVBQWUsQ0FBRUEsZUFGRSxDQUduQm1CLFNBQVMsQ0FBRSxDQUNQQyxJQUFJLENBQUUvQixNQUFNLENBQUNnQyxPQUFQLENBQWVELElBRGQsQ0FFUEUsSUFBSSxDQUFFbEMsRUFBRSxDQUFDRyxRQUFILEVBRkMsQ0FHUGdDLE1BQU0sQ0FBRTNCLE9BQU8sQ0FBQzJCLE1BQVIsRUFIRCxDQUlQL0IsT0FBTyxDQUFFRyxXQUpGLENBS1BGLFdBTE8sQ0FIUSxDQUF2QixFQVdILENBWkQsQyx5QkFjQStCLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUNiVCxLQUFLLENBQUVBLEtBRE0sQ0FFYjFCLFVBQVUsQ0FBRUEsVUFGQyxDQUdiRyxXQUFXLENBQUVBLFdBSEEsQ0FBakIifQ==